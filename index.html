<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PaixãoFlix</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:system-ui;
  background:#0b0b0f;
  color:#ffd84d;
  overflow:hidden;
}
:root{
  --card:#1b1b25;
  --border:rgba(255,255,255,.08);
  --focus:#e50914;
}
img{width:100%;display:block}
</style>

<!-- SIDEBAR -->
<style>
#sidebar{
  position:fixed;left:0;top:0;bottom:0;
  width:150px;
  background:#111118;
  border-right:1px solid var(--border);
  padding:1rem .5rem
}
#logo{text-align:center;margin-bottom:2rem}
#logo img{width:140px}
.menu a{
  display:block;
  padding:.8rem;
  margin-bottom:.3rem;
  border-radius:10px;
  text-align:center;
  cursor:pointer;
}
.menu a:focus{
  outline:none;
  box-shadow:0 0 0 3px var(--focus);
  background:var(--card);
}
</style>

<!-- HOME -->
<style>
#home{
  margin-left:150px;
  height:100vh;
  padding:1.2rem;
  overflow-y:auto;
}
.section{margin-bottom:2.6rem}
.section h2{font-size:1.5rem;margin-bottom:1rem}
.row{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:1rem
}
.card{
  background:var(--card);
  border-radius:14px;
  overflow:hidden;
}
.card:focus{box-shadow:0 0 0 4px var(--focus)}
.card img{height:260px;object-fit:cover}
.card span{padding:.6rem;display:block}
</style>

<!-- DETALHES -->
<style>
#details{display:none;height:100vh;background-size:cover}
.details-overlay{
  background:rgba(0,0,0,.85);
  height:100%;
  padding:3rem;
  display:flex
}
.details-poster{width:260px;margin-right:2rem}
.details-info h1{
  font-size:calc(2rem + 2px);
  font-weight:500;
  font-style:italic;
}
.details-info p{color:#fff;margin-top:3px}
</style>

</head>
<body>

<nav id="sidebar">
  <div id="logo">
    <img src="https://raw.githubusercontent.com/VisorFinances/lista-paixaoflix/refs/heads/main/logoof512.png">
  </div>
  <div class="menu">
    <a tabindex="1" onclick="goHome()">Início</a>
    <a tabindex="2" onclick="loadJSON('data/filmes.json')">Cinema</a>
    <a tabindex="3" onclick="loadJSON('data/series.json')">Séries</a>
    <a tabindex="4" onclick="loadJSON('data/favoritos.json')">Minha Lista</a>
  </div>
</nav>

<div id="home">
  <section class="section">
    <h2>Em Alta</h2>
    <div class="row" id="emAlta"></div>
  </section>
</div>

<div id="details">
  <div class="details-overlay">
    <div class="details-poster">
      <img id="dPoster">
    </div>
    <div class="details-info">
      <h1 id="dTitle"></h1>
      <p id="dMeta"></p>
      <p id="dDesc"></p>
    </div>
  </div>
</div>

<script>
let menu=[...document.querySelectorAll('.menu a')]
let cards=[]
let area='menu',m=0,c=0
menu[0].focus()

document.addEventListener('keydown',e=>{
  if(area==='menu'){
    if(e.key==='ArrowDown') m=(m+1)%menu.length
    if(e.key==='ArrowUp') m=(m-1+menu.length)%menu.length
    if(e.key==='ArrowRight'){area='cards';cards[0]?.focus()}
    if(e.key==='Enter') menu[m].click()
    menu[m].focus()
  }else{
    const cols=4
    if(e.key==='ArrowRight') c=Math.min(c+1,cards.length-1)
    if(e.key==='ArrowLeft'){if(c%cols===0){area='menu';menu[m].focus();return}else c--}
    if(e.key==='ArrowDown') c=Math.min(c+cols,cards.length-1)
    if(e.key==='ArrowUp') c=Math.max(c-cols,0)
    if(e.key==='Enter') cards[c].click()
    cards[c].focus()
  }
})

function loadJSON(url){
  fetch(url).then(r=>r.json()).then(data=>{
    const row=document.getElementById('emAlta')
    row.innerHTML=''
    data.slice(0,4).forEach((item,i)=>{
      row.innerHTML+=`
      <div class="card" tabindex="${10+i}" onclick='openDetails(${JSON.stringify(item)})'>
        <img src="${item.poster}">
        <span>${item.title}</span>
      </div>`
    })
    cards=[...document.querySelectorAll('.card')]
    area='cards';c=0;cards[0].focus()
  })
}

function openDetails(item){
  home.style.display='none'
  details.style.display='block'
  details.style.backgroundImage=`url(${item.poster})`
  dPoster.src=item.poster
  dTitle.textContent=item.title
  dMeta.textContent=`⭐ ${item.rating} • ${item.year}`
  dDesc.textContent=item.description
}

function goHome(){
  details.style.display='none'
  home.style.display='block'
  area='menu';menu[m].focus()
}
</script>

</body>
</html>
