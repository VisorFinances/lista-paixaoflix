<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>PaixãFlix</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
body { background: #000; color: #fff; font-family: Arial, sans-serif; overflow: hidden; }
.sidebar { position: fixed; left: 0; top: 0; width: 80px; height: 100vh; background: #0b0b0b; display: flex; flex-direction: column; align-items: center; padding-top: 20px; z-index: 10; }
.sidebar img.logo { width: 50px; cursor: pointer; }
.sidebar .icon { width: 30px; margin: 20px 0; cursor: pointer; filter: brightness(0.8); transition: 0.2s; }
.sidebar .icon:hover { filter: brightness(1.2); }
.topbar { position: fixed; top: 0; left: 80px; right: 0; height: 60px; background: #0a0a0a; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; z-index: 9; }
.topbar .counter { font-size: 18px; }
.topbar .datetime { font-size: 14px; }
.main { margin-left: 80px; margin-top: 60px; padding: 20px; }
.section { margin-bottom: 40px; }
.section h2 { margin-bottom: 10px; }
.row { display: flex; gap: 10px; overflow-x: auto; scroll-behavior: smooth; }
.card { min-width: 200px; background: #1a1a1a; border-radius: 8px; position: relative; cursor: pointer; transition: 0.2s; box-shadow: 0 6px 0 #ffc107; }
.card img { width: 100%; border-radius: 8px 8px 0 0; }
.card .info { padding: 8px; font-size: 12px; display: flex; justify-content: space-between; }
.card .number { position: absolute; top: 5px; left: 5px; background: #003d82; border: 2px solid #ffc107; color: #fff; padding: 4px 8px; border-radius: 50%; font-weight: bold; }
.card:focus { outline: 3px solid #ffc107; }
.player { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: #000; z-index: 100; display: none; }
.player video { width: 100%; height: 100%; }
.player .exit { position: absolute; top: 20px; right: 20px; background: rgba(255,255,255,0.1); border: none; color: #fff; padding: 10px 20px; cursor: pointer; border-radius: 4px; }
.search-results { display: none; position: fixed; top: 60px; left: 80px; right: 0; bottom: 0; background: #000; z-index: 8; padding: 20px; overflow-y: auto; }
button { background: #ffc107; color: #000; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; box-shadow: 0 4px 0 #b8860b; font-weight: bold; margin-right: 10px; }
button:active { transform: translateY(2px); box-shadow: 0 2px 0 #b8860b; }
</style>
</head>
<body>

<div class="sidebar">
  <img src="https://raw.githubusercontent.com/VisorFinances/lista-paixaoflix/refs/heads/main/logoof512.png" class="logo" onclick="location.reload()">
  <img src="https://img.icons8.com/ios-filled/50/ffffff/search.png" class="icon" onclick="toggleSearch()">
  <img src="https://img.icons8.com/ios-filled/50/ffffff/film-reel.png" class="icon" onclick="loadPage('cinema')">
  <img src="https://img.icons8.com/ios-filled/50/ffffff/tv-show.png" class="icon" onclick="loadPage('series')">
  <img src="https://img.icons8.com/ios-filled/50/ffffff/tv.png" class="icon" onclick="loadPage('tv')">
  <img src="https://img.icons8.com/ios-filled/50/ffffff/children.png" class="icon" onclick="loadPage('kids_filmes')">
  <img src="https://img.icons8.com/ios-filled/50/ffffff/animation.png" class="icon" onclick="loadPage('kids_series')">
  <img src="https://img.icons8.com/ios-filled/50/ffffff/like.png" class="icon" onclick="loadPage('favoritos')">
</div>

<div class="topbar">
  <div class="counter">Estamos evoluindo: <span id="total">0</span></div>
  <div class="datetime" id="datetime"></div>
</div>

<div class="search-results" id="searchResults"></div>

<div class="main" id="main"></div>

<div class="player" id="player">
  <video id="videoPlayer" controls autoplay></video>
  <button class="exit" onclick="exitPlayer()">Sair</button>
</div>

<script>
const data = {
  cinema: [
    {title:"Velozes 2026",poster:"https://image.tmdb.org/t/p/w200/1.jpg",backdrop:"https://image.tmdb.org/t/p/w1280/1b.jpg",year:2026,rating:9.1,category:"Ação",description:"Sinopse do filme...",url:"https://www.w3schools.com/html/mov_bbb.mp4"},
    {title:"Comédia 2025",poster:"https://image.tmdb.org/t/p/w200/2.jpg",backdrop:"https://image.tmdb.org/t/p/w1280/2b.jpg",year:2025,rating:8.5,category:"Comédia",description:"Sinopse...",url:"https://www.w3schools.com/html/movie.mp4"}
  ],
  series: [
    {title:"Série Ação",poster:"https://image.tmdb.org/t/p/w200/3.jpg",backdrop:"https://image.tmdb.org/t/p/w1280/3b.jpg",year:2026,rating:9.0,category:"Ação",description:"Sinopse...",episodes:["https://www.w3schools.com/html/mov_bbb.mp4","https://www.w3schools.com/html/movie.mp4"]}
  ],
  kids_filmes: [
    {title:"Zootopia",poster:"https://image.tmdb.org/t/p/w200/4.jpg",backdrop:"https://image.tmdb.org/t/p/w1280/4b.jpg",year:2016,rating:8.7,category:"Animação",description:"Sinopse...",url:"https://www.w3schools.com/html/mov_bbb.mp4"}
  ],
  kids_series: [
    {title:"Peppa",poster:"https://image.tmdb.org/t/p/w200/5.jpg",backdrop:"https://image.tmdb.org/t/p/w1280/5b.jpg",year:2010,rating:7.5,category:"Animação",description:"Sinopse...",episodes:["https://www.w3schools.com/html/mov_bbb.mp4"]}
  ],
  favoritos: [],
  tv: `#EXTM3U
#EXTINF:-1 tvg-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a3/Rede_Globo_logo.svg/200px-Rede_Globo_logo.svg.png" group-title="Abertos",Globo
https://live-hls-01-01.globo.com/h264/live/primary.m3u8
#EXTINF:-1 tvg-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/5/54/SBT_logo_2020.svg/200px-SBT_logo_2020.svg.png" group-title="Abertos",SBT
https://sbt01.hls.tvembed.com/sbt/playlist.m3u8`
};

let continueWatching = JSON.parse(localStorage.getItem('continue') || '[]');
let currentPage = 'home';

function updateDateTime() {
  const now = new Date();
  const opts = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
  document.getElementById('datetime').textContent = now.toLocaleString('pt-BR', opts);
}
setInterval(updateDateTime, 1000);

function updateCounter() {
  let total = 0;
  Object.values(data).forEach(arr => {
    if (Array.isArray(arr)) total += arr.length;
  });
  document.getElementById('total').textContent = total;
}

function renderHome() {
  const main = document.getElementById('main');
  main.innerHTML = `
    <div class="section"><h2>PaixãFlix indica hoje</h2><div class="row" id="top4"></div></div>
    <div class="section"><h2>Continuar assistindo</h2><div class="row" id="continue"></div></div>
  `;
  const pool = [...data.cinema, ...data.series, ...data.kids_filmes, ...data.kids_series];
  const picked = pool.sort(() => 0.5 - Math.random()).slice(0, 4);
  const top4 = document.getElementById('top4');
  picked.forEach((item, idx) => {
    const card = createCard(item, idx + 1);
    card.onclick = () => goDetail(item);
    top4.appendChild(card);
  });
  const continueContainer = document.getElementById('continue');
  continueWatching.forEach(item => {
    const card = createCard(item);
    card.onclick = () => playContent(item, item.progress || 0);
    continueContainer.appendChild(card);
  });
}

function createCard(item, number) {
  const div = document.createElement('div');
  div.className = 'card';
  div.tabIndex = 0;
  div.innerHTML = `
    ${number ? `<div class="number">${number}</div>` : ''}
    <img src="${item.poster}" alt="${item.title}">
    <div class="info">
      <span>${item.year}</span>
      <span>⭐ ${item.rating}</span>
      <span>${item.category}</span>
    </div>
  `;
  return div;
}

function goDetail(item) {
  const main = document.getElementById('main');
  main.innerHTML = `
    <div style="position:relative;">
      <img src="${item.backdrop}" style="position:absolute;opacity:.1;width:100%;z-index:0;">
      <div style="display:flex;align-items:center;z-index:1;position:relative;">
        <img src="${item.poster}" style="width:200px;">
        <div style="margin-left:20px;">
          <h1>${item.title}</h1>
          <p>${item.year}   ⭐ ${item.rating}</p>
          <p>${item.description}</p>
          <button onclick="playContent(${JSON.stringify(item).replace(/"/g,'"')})">Assistir Agora</button>
          <button onclick="renderHome()">Voltar</button>
        </div>
      </div>
      ${item.episodes ? `
        <h2>Episódios</h2>
        <div class="row">
          ${item.episodes.map((url,i)=>`
            <div class="card" tabindex="0" onclick="playContent(${JSON.stringify({...item,episode:i,url})})">
              <img src="${item.poster}"><div class="info"><span>Ep ${i+1}</span></div>
            </div>
          `).join('')}
        </div>
      ` : ''}
    </div>
  `;
}

function playContent(item, start = 0) {
  const player = document.getElementById('player');
  const video = document.getElementById('videoPlayer');
  video.src = item.url;
  video.currentTime = start;
  player.style.display = 'block';
  video.play();
  video.onended = () => {
    if (item.episode !== undefined && item.episodes && item.episode < item.episodes.length - 1) {
      setTimeout(() => {
        playContent({...item, episode: item.episode + 1, url: item.episodes[item.episode + 1]});
      }, 5000);
    } else {
      exitPlayer();
    }
  };
  video.ontimeupdate = () => {
    item.progress = video.currentTime;
    let list = continueWatching.filter(x => x.title !== item.title);
    list.unshift(item);
    continueWatching = list.slice(0, 20);
    localStorage.setItem('continue', JSON.stringify(continueWatching));
  };
}

function exitPlayer() {
  document.getElementById('player').style.display = 'none';
  document.getElementById('videoPlayer').pause();
}

function loadPage(page) {
  currentPage = page;
  const main = document.getElementById('main');
  if (page === 'tv') {
    const lines = data.tv.split('\n').filter(l => l.includes('tvg-logo'));
    const channels = lines.map(l => {
      const name = l.match(/tvg-name="([^"]+)"/)?.[1] || 'Canal';
      const logo = l.match(/tvg-logo="([^"]+)"/)?.[1] || '';
      const url = lines[lines.indexOf(l)+1];
      return {name, logo, url};
    });
    main.innerHTML = '<h2>Canais Ao Vivo</h2><div class="row">' +
      channels.map(ch=>`
        <div class="card" tabindex="0" style="display:flex;align-items:center;gap:10px;min-width:250px;" onclick="playContent(${JSON.stringify(ch)})">
          <img src="${ch.logo}" style="width:40px;height:40px;">
          <span>${ch.name}</span>
        </div>
      `).join('') + '</div>';
    return;
  }
  let items = data[page] || [];
  if (page.includes('kids')) items = items.sort((a,b) => a.title.localeCompare(b.title));
  const grouped = {};
  const cats = ["Lançamento 2026","Lançamento 2025","Ação","Aventura","Comédia","Drama","Nacional","Romance","Religioso","Ficção","Anime","Animação","Família","Clássicos","Dorama","Suspense","Policial","Crime","Terror","Documentários","Faroeste","Musical","Adulto"];
  items.forEach(item => {
    const cat = item.category || 'Outros';
    if (!grouped[cat]) grouped[cat] = [];
    grouped[cat].push(item);
  });
  main.innerHTML = cats.filter(c => grouped[c]).map(cat => `
    <h2>${cat}</h2>
    <div class="row">
      ${grouped[cat].map(item=>{const c=createCard(item);c.onclick=()=>goDetail(item);return c.outerHTML;}).join('')}
    </div>
  `).join('');
}

function toggleSearch() {
  const sr = document.getElementById('searchResults');
  sr.style.display = sr.style.display === 'block' ? 'none' : 'block';
  if (sr.style.display === 'block') sr.innerHTML = '<input placeholder="Digite..." style="width:100%;padding:10px;font-size:18px;" oninput="realtimeSearch(this.value)">';
}

function realtimeSearch(q) {
  if (!q) return;
  const pool = [...data.cinema, ...data.series, ...data.kids_filmes, ...data.kids_series];
  const res = pool.filter(item => item.title.toLowerCase().includes(q.toLowerCase()));
  const sr = document.getElementById('searchResults');
  sr.innerHTML = '<input placeholder="Digite..." style="width:100%;padding:10px;font-size:18px;" oninput="realtimeSearch(this.value)">' +
    res.map(item=>{const c=createCard(item);c.onclick=()=>goDetail(item);return c.outerHTML;}).join('');
}

document.addEventListener('keydown', e => {
  const f = document.querySelector(':focus');
  if (!f) return;
  const row = f.parentElement;
  const idx = Array.from(row.children).indexOf(f);
  if (e.key === 'ArrowRight' && f.nextElementSibling) f.nextElementSibling.focus();
  if (e.key === 'ArrowLeft' && f.previousElementSibling) f.previousElementSibling.focus();
  if (e.key === 'ArrowDown' && row.parentElement.nextElementSibling) {
    const nextRow = row.parentElement.nextElementSibling.querySelector('.row');
    if (nextRow && nextRow.children[idx]) nextRow.children[idx].focus();
  }
  if (e.key === 'ArrowUp' && row.parentElement.previousElementSibling) {
    const prevRow = row.parentElement.previousElementSibling.querySelector('.row');
    if (prevRow && prevRow.children[idx]) prevRow.children[idx].focus();
  }
});

 renderHome();
 updateCounter();
</script>
</body>
</html>
