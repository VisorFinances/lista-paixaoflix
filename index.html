<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>PaixãoFlix TV</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.8"></script>

<style>
/* Reset de overflow para garantir que nada escape da tela */
* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body, html { background: #000; color: #fff; font-family: 'Poppins', sans-serif; height: 100%; width: 100%; overflow: hidden; }

#layout-principal { display: flex; height: 100vh; width: 100vw; }

/* --- MENU LATERAL --- */
#barra-menu { 
    width: 220px; 
    background: #001a1a; 
    border-right: 2px solid #003333;
    display: flex; flex-direction: column; z-index: 100; flex-shrink: 0;
}

#header-logo { padding: 15px 10px; text-align: center; flex-shrink: 0; }
#header-logo img { height: 120px; width: auto; max-width: 100%; object-fit: contain; }

/* CAIXA DE PESQUISA - OCULTA NO MOBILE VIA MEDIA QUERY ABAIXO */
#searchBox { padding: 0 10px 15px; flex-shrink: 0; }
#searchInput { 
    width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #003333; 
    background: #000; color: #fff; outline: none; font-size: 12px; 
}

#itens-menu { flex: 1; padding: 10px; overflow-y: auto; }
.item-clicavel { 
    padding: 12px; font-size: 13px; margin-bottom: 8px; border-radius: 8px; 
    background: #0080ff; border-bottom: 3px solid #004d99;
    display: flex; align-items: center; cursor: pointer;
}
.item-clicavel i { margin-right: 15px; width: 20px; text-align: center; } /* Espaçamento solicitado */
.item-clicavel.selecionado { background: #fff !important; color: #000 !important; font-weight: bold; border-bottom: 3px solid #ccc; }

/* --- ÁREA DO PLAYER TOTALMENTE RESPONSIVA --- */
#area-player { flex: 1; position: relative; background: #000; display: flex; align-items: center; justify-content: center; }
#meu-video { width: 100%; height: 100%; background: #000; object-fit: fill; } /* Fill para garantir preenchimento total */

/* PAINEL DE CONTEÚDO */
#painel-conteudo { 
    position: absolute; left: 0; top: 0; height: 100%; 
    background: rgba(0,0,0,0.95); z-index: 50; display: none; align-items: center;
}
#lista-canais { width: 260px; height: 100%; border-right: 1px solid #444; overflow-y: auto; padding: 10px 0; }
.canal-item { padding: 12px 20px; font-size: 14px; border-bottom: 1px solid #222; cursor: pointer; }
.canal-item.ativo { background: #fff; color: #000; font-weight: bold; }

/* CAPA COLADA À LISTA */
#container-capa { padding: 0 20px; display: none; }
#imagem-capa { height: 380px; width: auto; border-radius: 10px; border: 3px solid #fff; }

/* --- AJUSTES RESPONSIVOS FINAIS (MOBILE) --- */
@media (max-width: 850px) {
    #barra-menu { width: 150px; }
    #header-logo { padding: 10px 5px; }
    #header-logo img { height: 71px; width: 71px; } /* Largura reduzida conforme ordem */
    
    /* ORDEM EXECUTADA: OCULTAR BUSCA NO MOBILE */
    #searchBox { display: none; } 
    
    .item-clicavel { font-size: 10px; padding: 12px 8px; margin-bottom: 5px; }
    .item-clicavel i { margin-right: 8px; font-size: 14px; }
    
    #lista-canais { width: 160px; }
    #imagem-capa { height: 200px; }
    
    /* Player ocupa 100% sem vãos */
    #area-player { height: 100vh; width: calc(100vw - 150px); }
    #meu-video { object-fit: cover; } 
}

#relogio { font-size: 11px; color: #888; margin-top: 5px; text-align: center; }
</style>
</head>
<body>

<div id="layout-principal">
    <div id="barra-menu">
        <div id="header-logo">
            <img src="https://raw.githubusercontent.com/VisorFinances/lista-paixaoflix/refs/heads/main/logoof512.png">
            <div id="relogio"></div>
        </div>
        
        <div id="searchBox">
            <input type="text" id="searchInput" placeholder="Pesquisar...">
        </div>

        <div id="itens-menu">
            <div class="item-clicavel selecionado" data-type="channels"><i class="fas fa-tv"></i> TV ao vivo</div>
            <div class="item-clicavel" data-type="fav"><i class="fas fa-star" style="color:#ffeb3b"></i> Favoritos</div>
            <div class="item-clicavel" data-type="categories"><i class="fas fa-film"></i> Cinema</div>
            <div class="item-clicavel" data-type="series"><i class="fas fa-clapperboard"></i> Séries</div>
            <div class="item-clicavel" data-type="kids_channels"><i class="fas fa-child"></i> Canal Kids</div>
            <div class="item-clicavel" data-type="kids_movies"><i class="fas fa-icons"></i> Filmes Kids</div>
            <div class="item-clicavel" data-type="kids_series"><i class="fas fa-robot"></i> Séries Kids</div>
        </div>
    </div>

    <div id="area-player">
        <video id="meu-video" autoplay playsinline controls></video>

        <div id="painel-conteudo">
            <div id="lista-canais"></div>
            <div id="container-capa">
                <img id="imagem-capa" src="">
            </div>
        </div>
    </div>
</div>

<script>
const video = document.getElementById("meu-video");
const listaCanais = document.getElementById("lista-canais");
const painelConteudo = document.getElementById("painel-conteudo");
const containerCapa = document.getElementById("container-capa");
const imagemCapa = document.getElementById("imagem-capa");
const botoesMenu = document.querySelectorAll(".item-clicavel");

let hls = null;
let allData = { channels: [], fav: [], categories: [], series: [], kids_channels: [], kids_movies: [], kids_series: [] };

function carregarRelogio() {
    const d = new Date();
    document.getElementById("relogio").innerText = d.toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'});
}
setInterval(carregarRelogio, 1000); carregarRelogio();

// Comando por toque e clique unificado
document.addEventListener('click', (e) => {
    const btnMenu = e.target.closest('.item-clicavel');
    const btnCanal = e.target.closest('.canal-item');

    if (btnMenu) {
        botoesMenu.forEach(b => b.classList.remove('selecionado'));
        btnMenu.classList.add('selecionado');
        const tipo = btnMenu.dataset.type;
        abrirPainel(tipo);
    }

    if (btnCanal) {
        const url = btnCanal.dataset.url;
        playVideo(url);
    }
});

function abrirPainel(tipo) {
    painelConteudo.style.display = "flex";
    // Aqui você deve popular a listaCanais baseada no 'tipo'
    // Exemplo genérico para visualização:
    renderizarMock(tipo);
}

function renderizarMock(tipo) {
    listaCanais.innerHTML = `<div class="canal-item" data-url="">Carregando ${tipo}...</div>`;
    // Simulação de preenchimento
}

function playVideo(url) {
    if (!url) { painelConteudo.style.display = "none"; return; }
    if (hls) hls.destroy();
    if (url.includes(".m3u8")) {
        if (Hls.isSupported()) {
            hls = new Hls(); hls.loadSource(url); hls.attachMedia(video);
        } else { video.src = url; }
    } else { video.src = url; }
    painelConteudo.style.display = "none";
}

// Fechar painel se clicar no player
video.addEventListener('click', () => {
    painelConteudo.style.display = "none";
});

</script>
</body>
</html>
