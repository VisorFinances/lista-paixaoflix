<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>PaixãoFlix TV</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.8"></script>

<style>
*{overflow:hidden;box-sizing:border-box}
html,body{margin:0;padding:0;background:#000;color:#fff;font-family:Poppins;height:100%}
#app{display:flex;height:100vh}
#menu{width:220px;background:#001a1a;display:flex;flex-direction:column;border-right:1px solid #003333}
#menuHeader{padding:15px 10px;text-align:center}
#menuHeader img{height:120px}
#clock{font-size:11px;color:#ccc;margin-top:8px}
#searchBox{padding:10px}
#searchInput{width:100%;padding:10px;border-radius:6px;border:1px solid #2a3642;background:#000;color:#fff}
#searchInput.focused{border-color:#fff;background:#111}
#menuItemsArea{flex:1;overflow-y:auto;padding:10px}
.menu-item{padding:12px;font-size:13px;margin-bottom:8px;border-radius:6px;background:#0a2a4a;border-bottom:3px solid #004d99;display:flex;align-items:center;cursor:pointer}
.menu-item.active{background:#fff;color:#000;font-weight:bold}
#content{flex:1;position:relative}
#videoContainer{width:100%;height:100%}
video{width:100%;height:100%;object-fit:contain}

#channelList{
position:absolute;top:0;left:0;
min-width:160px;max-width:250px;
height:100%;background:rgba(0,0,0,.95);
display:none;overflow-y:auto;border-right:1px solid #fff;z-index:110
}

.channel{padding:12px 15px;font-size:13px;border-bottom:1px solid #222;cursor:pointer}
.channel.active{background:#fff;color:#000;font-weight:bold}

#posterWrapper{
position:absolute;top:50%;transform:translateY(-50%);
width:250px;display:none;z-index:120;pointer-events:none
}
#posterPreview{width:100%;border-radius:10px;border:3px solid #fff}
</style>
</head>

<body>
<div id="app">
<div id="menu">
<div id="menuHeader">
<img src="https://raw.githubusercontent.com/VisorFinances/lista-paixaoflix/refs/heads/main/logoof512.png">
<div id="clock"></div>
</div>

<div id="searchBox">
<input type="text" id="searchInput" placeholder="Pesquisar...">
</div>

<div id="menuItemsArea">
<div class="menu-item active" data-type="recent">Assistindo agora</div>
<div class="menu-item" data-type="channels">TV ao vivo</div>
<div class="menu-item" data-type="fav">Favoritos</div>
<div class="menu-item" data-type="categories">Cinema</div>
<div class="menu-item" data-type="series">Séries</div>
<div class="menu-item" data-type="kids_channels">Canal Kids</div>
<div class="menu-item" data-type="kids_movies">Filmes Kids</div>
<div class="menu-item" data-type="kids_series">Séries Kids</div>
</div>
</div>

<div id="content">
<div id="videoContainer"><video id="video" playsinline controls></video></div>
<div id="channelList"></div>
<div id="posterWrapper"><img id="posterPreview"></div>
</div>
</div>

<script>
const video=document.getElementById("video");
const channelList=document.getElementById("channelList");
const posterWrapper=document.getElementById("posterWrapper");
const posterPreview=document.getElementById("posterPreview");
const searchInput=document.getElementById("searchInput");
const menuItems=[...document.querySelectorAll(".menu-item")];

let channels=[],movies=[],series=[],kidsChannels=[],kidsMovies=[],kidsSeries=[];
let recent=[],favorites=[];
let filteredList=[],viewMode="recent",selectedIndex=0,menuIndex=0,menuFocused=true;
let level="menu"; // menu | categories | list

const movieCats=["Lançamentos 2026","Lançamentos 2025","AÇÃO","AVENTURA","ANIME","ANIMAÇÃO","COMÉDIA","DRAMA","DORAMA","SUSPENSE","POLICIAL","TERROR","DOCUMENTÁRIOS","FICÇÃO","CLÁSSICOS","FAROESTE","NACIONAL","ROMANCE","RELIGIOSO","ADULTO"];

function normalize(t){return(t||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase()}

function hidePoster(){posterWrapper.style.display="none"}

function render(){
channelList.innerHTML="";
const data=viewMode==="categories"?movieCats:filteredList;
data.forEach((it,i)=>{
const d=document.createElement("div");
d.className="channel"+(i===selectedIndex?" active":"");
d.textContent=it.titulo||it;
d.onclick=()=>{selectedIndex=i;handleEnter()};
d.ontouchstart=d.onclick;
channelList.appendChild(d);
});
if(!menuFocused && data[selectedIndex]?.poster){
posterPreview.src=data[selectedIndex].poster;
const r=channelList.getBoundingClientRect();
posterWrapper.style.left=r.right+"px";
posterWrapper.style.display="block";
}else hidePoster();
}

function handleEnter(){
if(viewMode==="categories"){
filteredList=movies.filter(m=>normalize(m.genero)===normalize(movieCats[selectedIndex]));
viewMode="list";level="list";selectedIndex=0;render();
}else if(level==="list"){
playMedia(filteredList[selectedIndex]);
}
}

function playMedia(item){
if(!item?.url)return;
hidePoster();channelList.style.display="none";
video.src=item.url;video.play().catch(()=>{});
}

document.addEventListener("keydown",e=>{
if(e.key==="ArrowLeft"){
if(level==="list"){ // 1º volta categorias
level="categories";viewMode="categories";selectedIndex=0;hidePoster();render();
}
else if(level==="categories"){ // 2º volta menu
menuFocused=true;channelList.style.display="none";hidePoster();level="menu";
}
}

if(e.key==="ArrowRight"||e.key==="Enter"){
if(menuFocused){
menuFocused=false;viewMode=menuItems[menuIndex].dataset.type;
level=viewMode==="categories"?"categories":"list";
channelList.style.display="block";selectedIndex=0;render();
}else handleEnter();
}

if(e.key==="ArrowUp"&&!menuFocused){selectedIndex=Math.max(0,selectedIndex-1);render()}
if(e.key==="ArrowDown"&&!menuFocused){selectedIndex++;render()}
});

searchInput.addEventListener("input",()=>{
const q=normalize(searchInput.value);
filteredList=[...movies,...series,...channels].filter(i=>normalize(i.titulo).includes(q));
viewMode="list";level="list";menuFocused=false;
channelList.style.display="block";selectedIndex=0;render();
});

function updateClock(){
const d=new Date();
const m=["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"];
clock.innerText=`${d.getDate()} ${m[d.getMonth()]} ${d.getFullYear()} | ${String(d.getHours()).padStart(2,"0")}:${String(d.getMinutes()).padStart(2,"0")}`;
}
setInterval(updateClock,1000);updateClock();
</script>
</body>
</html>
